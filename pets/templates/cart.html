{% extends 'base.html' %}
{% load static %}
{% block content %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Cart</title>
    <!-- CSS styles -->
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #e6d4d4;
        }
        h1 {
            text-align: center;
            margin-bottom: 20px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        th, td {
            padding: 10px;
            text-align: left;
            border: 1px solid #ccc; /* Add border */
        }
        th {
            background-color: #007bff;
            color: #fff;
        }
        tr:nth-child(even) {
            background-color: #f2f2f2;
        }
        .quantity-btn, .delete-btn {
            text-decoration: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
        }
        .quantity-btn {
            background-color: #28a745;
            color: #fff;
            margin-right: 5px;
        }
        .delete-btn {
            background-color: #dc3545;
            color: #fff;
        }
        img {
            max-width: 80px;
            height: auto;
            display: block;
            margin: auto;
        }
        .total-row {
            font-weight: bold;
        }
        .checkout-btn-container {
            text-align: right; /* Align to the right side */
        }
        .checkout-btn {
            padding: 10px 20px;
            background-color: #007bff;
            color: #fff;
            border: none;
            border-radius: 3px;
            cursor: pointer;
            text-decoration: none;
        }
        .checkout-btn:hover {
            background-color: #0056b3; /* Darker color on hover */
        }
        .empty-cart-message {
            text-align: center;
            margin-top: 250px;
            font-size: 25px;
            color: #737372;
        }
    </style>
</head>
<body>
    <section class="banner" style="position: relative; overflow: hidden; height: 900px; background-image:url('{% static 'assets/images/cart.jpg' %}')">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-6">
                    <div class="banner-text">
                        <h2>Shopping Cart</h2>
                        <ol class="breadcrumb">
                        </ol>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="banner-img">
                        <div class="banner-img-1">
                                <path fill-rule="evenodd" clip-rule="evenodd" d="M9.82698 416.603C-19.0352 298.701 18.5108 173.372 107.497 90.7633L110.607 96.5197C24.3117 177.199 -12.311 298.935 15.0502 413.781L9.82698 416.603ZM89.893 565.433C172.674 654.828 298.511 692.463 416.766 663.224L414.077 658.245C298.613 686.363 175.954 649.666 94.9055 562.725L89.893 565.433ZM656.842 259.141C685.039 374.21 648.825 496.492 562.625 577.656L565.413 582.817C654.501 499.935 691.9 374.187 662.536 256.065L656.842 259.141ZM581.945 107.518C499.236 18.8371 373.997 -18.4724 256.228 10.5134L259.436 16.4515C373.888 -10.991 495.248 25.1518 576.04 110.708L581.945 107.518Z" fill="#fa441d"></path>
                            </svg>
                            <!-- <img src="{% static 'assets/img/banner-img-1.jpg' %}" alt="banner"> -->
                        </div>
                        <div class="banner-img-2">
                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M9.82698 416.603C-19.0352 298.701 18.5108 173.372 107.497 90.7633L110.607 96.5197C24.3117 177.199 -12.311 298.935 15.0502 413.781L9.82698 416.603ZM89.893 565.433C172.674 654.828 298.511 692.463 416.766 663.224L414.077 658.245C298.613 686.363 175.954 649.666 94.9055 562.725L89.893 565.433ZM656.842 259.141C685.039 374.21 648.825 496.492 562.625 577.656L565.413 582.817C654.501 499.935 691.9 374.187 662.536 256.065L656.842 259.141ZM581.945 107.518C499.236 18.8371 373.997 -18.4724 256.228 10.5134L259.436 16.4515C373.888 -10.991 495.248 25.1518 576.04 110.708L581.945 107.518Z" fill="#fa441d"></path>
                            </svg>
                            <!-- <img src="{% static 'assets/img/banner-img-2.jpg' %}" alt="banner"> -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
           </section>
           <br><br><br>
  <section style="background-color: rgb(193, 215, 215);">
    {% if cart_items %}
    <!-- Display cart items if there are any -->
    <table border="1">
        <thead>
            <tr>
                <th>Image</th>
                <th>Name</th>
                <th>Price</th>
                <th>Quantity</th>
                <th>Total Price</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            {% for key, item in cart_items.items %}
            <tr>
                <td><img src="{{ item.image.url }}" alt="{{ item.name }}"></td>
                <td>{{ item.name }}</td>
                <td>${{ item.price }}</td>
                <td>
                    <ul class="quantity-container">
                        <li>
                            <form action="{% url 'add_to_cart' item.id %}" method="post">
                                {% csrf_token %}
                                <button type="submit" class="quantity-btn">+</button>
                            </form>
                        </li>
                        <li>{{ item.quantity }}</li>
                        <li><a href="{% url 'decrease_quantity' item.id %}"><button class="quantity-btn">-</button></a></li>
                    </ul>
                </td>
                <td>${{ item.total_price }}</td>
                <td><a href="{% url 'remove_from_cart' item.id %}" class="delete-btn">Delete</a></td>
            </tr>
            {% endfor %}
            <tr class="total-row">
                <td colspan="4" align="right">Total:</td>
                <td>${{ total_price }}</td>
                <td></td>
            </tr>
        </tbody>
    </table>
    <div class="checkout-btn-container">
        <a href="{% url 'checkout' %}" id="checkout-btn" class="checkout-btn">Check out</a>
    </div>
    {% else %}
    <!-- Display a message if the cart is empty -->
    <div class="empty-cart-message">
        <p>Your shopping cart is empty.</p>
    </div>
    {% endif %}

</section>
    <!-- JavaScript to disable checkout button if cart is empty -->
    <script>
        // JavaScript code to disable checkout button if cart is empty
        document.addEventListener('DOMContentLoaded', function() {
            var cartItems = "{{ cart_items|length }}"; // Get the number of items in the cart
            var checkoutBtn = document.getElementById('checkout-btn');
            if (cartItems == 0) {
                checkoutBtn.style.pointerEvents = "none"; // Disable button click events
                checkoutBtn.style.backgroundColor = "#ccc"; // Change button color to indicate disabled state
            }
        });
    </script>
</body>
</html>

{% endblock %}
